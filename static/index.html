<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>SPEW: Shit PicturE Web</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="main.js" defer></script>
    <script src="//unpkg.com/alpinejs" defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              pixel: ["dos437-unicode", "mono"],
            },
            colors: {
              transparent: "transparent",
              current: "currentColor",
              white: "#fff",
              black: "#000",
              red: "#FF5555",
              "red-dark": "#AA0000",
              magenta: "#FF55FF",
              "magenta-dark": "#AA00AA",
              yellow: "#FFFF55",
              "yellow-dark": "#AAAA00",
              green: "#55FF55",
              "green-dark": "#00AA00",
              cyan: "#55FFFF",
              "cyan-dark": "#00AAAA",
              blue: "#5555FF",
              "blue-dark": "#0000AA",
              gray: "#AAaaAA",
              "gray-dark": "#555555",
              brown: "#AA5500",
            },
          },
        },
      };
    </script>
    <script src="wasm_exec.js"></script>
    <script>
      if (!WebAssembly.instantiateStreaming) {
        // polyfill
        WebAssembly.instantiateStreaming = async (resp, importObject) => {
          const source = await (await resp).arrayBuffer();
          return await WebAssembly.instantiate(source, importObject);
        };
      }
      const go = new Go();
      WebAssembly.instantiateStreaming(
        fetch("main.wasm"),
        go.importObject,
      ).then((result) => {
        go.run(result.instance);
      });
    </script>
  </head>
  <body class="mx-auto p-8 max-w-screen-lg" x-data="shitpic">
    <input type="file" x-ref="fileInput" @change="change" />
    <div x-cloak x-show="isProcessing">Is Processing</div>
    <div
      class="text-red font-bold"
      x-cloak
      x-show="!!error"
      x-text="error? error: ''"
    ></div>
    <img
      :src="src"
      class="max-w-[50vw] max-h-[50vh]"
      @click="this.output? download(): $refs.fileInput.click()"
    />
  </body>
</html>
